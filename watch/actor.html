<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TMDB — Профиль актёра</title>
  <meta name="color-scheme" content="dark" />

  <style>
    @font-face {
      font-family: 'buttonbold';
      src: url('../Font/TTFirsNeue-DemiBold.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: 'textbold';
      src: url('../Font/TTFirsNeue-Bold.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: 'text';
      src: url('../Font/TTFirsNeue-Light.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: 'textregular';
      src: url('../Font/TTFirsNeue-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    :root{
      --bg:#000000;
      --text:#e6e6ea;
      --muted:#9aa0a6;
      --accent:#22c55e;
      --radius:20px;
      --shadow:0 10px 30px rgba(0,0,0,.45);
      --card:#0b0b0f;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:'textregular', sans-serif;
    }
    html,body{height:100%}
    body{
      background:var(--bg);
      color:var(--text);
      line-height:1.6;
      overflow-x:hidden;
      user-select:none;
      -webkit-user-select:none;
      -moz-user-select:none;
      -ms-user-select:none;
      -webkit-touch-callout:none;
    }
    a{text-decoration:none; color:inherit; transition:.3s}
    img{
      display:block;
      max-width:100%;
      -webkit-user-drag:none;
      user-drag:none;
      pointer-events:none;
    }

    .preloader{
      position:fixed;
      inset:0;
      background:var(--bg);
      z-index:9999;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:1;
      transition:opacity .5s ease;
    }
    .preloader.hidden{opacity:0; pointer-events:none}
    .loader-wrapper{position:relative; width:100px; height:50px; margin:auto; z-index:1;}
    .loader-wrapper .packman::before,
    .loader-wrapper .packman::after{
      content:'';
      position:absolute;
      width:50px;
      height:25px;
      background-color:#EFF107;
    }
    .loader-wrapper .packman::before{
      border-radius:100px 100px 0 0;
      transform:translate(-50%, -50%);
      animation:pac-top 0.5s linear infinite;
      transform-origin:center bottom;
    }
    .loader-wrapper .packman::after{
      border-radius:0 0 100px 100px;
      transform:translate(-50%, 50%);
      animation:pac-bot 0.5s linear infinite;
      transform-origin:center top;
    }
    @keyframes pac-top{
      0%{transform:translate(-50%, -50%) rotate(0)}
      50%{transform:translate(-50%, -50%) rotate(-30deg)}
      100%{transform:translate(-50%, -50%) rotate(0)}
    }
    @keyframes pac-bot{
      0%{transform:translate(-50%, 50%) rotate(0)}
      50%{transform:translate(-50%, 50%) rotate(30deg)}
      100%{transform:translate(-50%, 50%) rotate(0)}
    }
    .dots .dot{
      position:absolute;
      z-index:-1;
      top:8px;
      width:10px;
      height:10px;
      border-radius:50%;
      background:#fff;
    }
    .dots .dot:nth-child(1){left:90px; animation:dot-stage1 0.5s infinite}
    .dots .dot:nth-child(2){left:60px; animation:dot-stage1 0.5s infinite}
    .dots .dot:nth-child(3){left:30px; animation:dot-stage1 0.5s infinite}
    .dots .dot:nth-child(4){left:10px; animation:dot-stage2 0.5s infinite}
    @keyframes dot-stage1{
      0%{transform:translate(0,0)}
      100%{transform:translate(-24px,0)}
    }
    @keyframes dot-stage2{
      0%{transform:scale(1)}
      5%,100%{transform:scale(0)}
    }

    .fade-in{
      opacity:0; 
      transform:translateY(20px); 
      transition:all .7s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .fade-in.visible{
      opacity:1; 
      transform:translateY(0);
    }

    .hero{
      position:relative;
      min-height:70vh;
      padding:40px 24px 60px;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .hero-bg{
      position:absolute;
      inset:0;
      background:#000;
      overflow:hidden;
      z-index:0;
    }
    .hero-bg::before{
      content:'';
      position:absolute;
      inset:0;
      background:radial-gradient(circle at 20% 0, rgba(255,255,255,0.12) 0, transparent 55%);
      opacity:0.6;
    }
    .hero-bg-blur{
      position:absolute;
      inset:-40px;
      background-position:center;
      background-size:cover;
      filter: blur(100px) brightness(0.45);
      transform:scale(1.08);
    }
    .hero-bg-overlay{
      position:absolute;
      inset:0;
      background:linear-gradient(to top, #000 0%, rgba(0,0,0,0.95) 15%, rgba(0,0,0,0.7) 40%, rgba(0,0,0,0.5) 70%, transparent 100%);
      z-index:2;
    }

    .hero-inner{
      position:relative;
      z-index:3;
      max-width:1200px;
      margin:0 auto;
      display:flex;
      gap:30px;
      align-items:flex-start;
    }

    .actor-avatar-wrap{
      flex-shrink:0;
      width:220px;
      height:330px;
      border-radius:35px;
      background:rgba(10,10,10,0.85);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 20px 60px rgba(0,0,0,0.8);
      position:relative;
      overflow:hidden;
    }
    .actor-avatar-border{
      position:absolute;
      inset:0;
      padding:1px;
      border-radius:inherit;
      background:linear-gradient(135deg, rgba(255,255,255,0.5), rgba(80,80,80,0.2), rgba(255,255,255,0.35));
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      pointer-events:none;
      z-index:2;
    }
    .actor-avatar{
      position:relative;
      width:100%;
      height:100%;
      border-radius:30px;
      overflow:hidden;
    }
    .actor-avatar img{
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .actor-main{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:14px;
      color:var(--text);
    }

    .actor-tag-id{
      font-size:13px;
      text-transform:uppercase;
      letter-spacing:0.12em;
      color:var(--muted);
      font-family:'buttonbold', sans-serif;
    }

    .actor-name{
      font-size:36px;
      font-family:'textbold', sans-serif;
    }

    .actor-bio-wrapper{
      position:relative;
    }

    .actor-about{
      font-size:14px;
      color:var(--text);
      max-width:640px;
      font-family:'text', sans-serif;
      line-height:1.6;
      display:-webkit-box;
      -webkit-line-clamp:3;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .bio-read-more{
      display:inline;
      color:var(--accent);
      cursor:pointer;
      font-family:'buttonbold', sans-serif;
      font-size:13px;
      margin-left:4px;
      text-decoration:none;
      transition:opacity 0.2s;
    }
    .bio-read-more:hover{
      opacity:0.8;
    }

    .actor-personal-card{
      margin-top:8px;
      padding:14px 16px;
      border-radius:18px;
      background:rgba(12,12,16,0.95);
      border:1px solid rgba(255,255,255,0.08);
      display:grid;
      grid-template-columns:repeat(2, minmax(0, 1fr));
      gap:10px 30px;
      font-size:13px;
    }
    .person-row-value{
      font-family:'textregular', sans-serif;
      color:var(--text);
    }

    .close-btn{
      position:fixed;
      top:10px;
      right:24px;
      cursor:pointer;
      background-color:rgba(0, 0, 0, 0.637);
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      border:1px solid rgba(255, 255, 255, 0.2);
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:8px;
      z-index:1001;
      pointer-events:auto;
      width:43px;
      height:43px;
      transition:transform 0.2s ease;
    }
    .close-btn:active{
      transform:scale(0.95);
    }
    .close-btn img{
      width:24px;
      height:24px;
      filter:brightness(0) invert(1);
      pointer-events:none;
    }

    .details{
      max-width:1200px;
      margin:0 auto 40px;
      padding:0 24px;
      display:flex;
      flex-direction:column;
      gap:24px;
    }

    .card{
      padding:22px;
      border-radius:20px;
      background:var(--card);
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,0.06);
    }

    .section-title{
      font-size:22px;
      font-family:'textbold', sans-serif;
      margin-bottom:16px;
    }

    .works-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(150px, 1fr));
      gap:16px;
      margin-bottom:20px;
    }

    .work-card{
      cursor:pointer;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .work-thumb{
      width:100%;
      aspect-ratio:2/3;
      border-radius:14px;
      overflow:hidden;
      background:#111;
      position:relative;
      transition:transform .2s ease;
    }
    .work-thumb::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius:inherit;
      padding:1px;
      background:linear-gradient(135deg,rgba(255,255,255,0.4),rgba(150,150,150,0.1),rgba(255,255,255,0.3));
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      pointer-events:none;
      z-index:1;
    }
    .work-thumb img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .work-card:hover .work-thumb{
      transform:scale(1.03);
    }

    .work-rating-badge{
      position:absolute;
      top:8px;
      right:8px;
      z-index:2;
      padding:4px 10px;
      border-radius:999px;
      backdrop-filter:blur(10px);
      font-family:'buttonbold', sans-serif;
      font-size:12px;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      min-width:40px;
    }
    .work-rating-badge::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius:inherit;
      padding:1px;
      background:linear-gradient(
        135deg,
        rgba(255,255,255,0.35),
        rgba(200,200,200,0.15),
        rgba(255,255,255,0.25),
        rgba(120,120,120,0.1)
      );
      -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      pointer-events:none;
      z-index:-1;
    }
    .work-rating-badge.high{
      background:rgba(40,167,69,0.85);
    }
    .work-rating-badge.medium{
      background:rgba(255,193,7,0.85);
    }
    .work-rating-badge.low{
      background:rgba(220,53,69,0.85);
    }

    .work-title{
      font-size:13px;
      font-family:'buttonbold', sans-serif;
      line-height:1.35;
      max-height:2.7em;
      overflow:hidden;
    }
    .work-meta{
      font-size:12px;
      color:var(--muted);
      font-family:'text', sans-serif;
    }

    .empty-placeholder{
      font-size:14px;
      color:var(--muted);
      font-family:'text', sans-serif;
    }

    .load-more-btn{
      display:block;
      margin:20px auto 0;
      padding:10px 28px;
      border-radius:999px;
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.15);
      color:var(--text);
      font-family:'buttonbold', sans-serif;
      font-size:14px;
      cursor:pointer;
      transition:all 0.2s ease;
    }
    .load-more-btn:hover{
      background:rgba(255,255,255,0.12);
      transform:translateY(-2px);
    }
    .load-more-btn:active{
      transform:scale(0.97);
    }
    .load-more-btn.hidden{
      display:none;
    }

    .bio-modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      z-index:9998;
      display:none;
      align-items:center;
      justify-content:center;
      backdrop-filter:blur(8px);
      padding:20px;
    }
    .bio-modal-backdrop.active{
      display:flex;
    }
    .bio-modal{
      background:var(--card);
      border-radius:20px;
      max-width:700px;
      width:100%;
      max-height:80vh;
      overflow:hidden;
      box-shadow:0 30px 80px rgba(0,0,0,0.9);
      border:1px solid rgba(255,255,255,0.1);
      position:relative;
      display:flex;
      flex-direction:column;
    }
    .bio-modal-header{
      padding:20px 24px;
      border-bottom:1px solid rgba(255,255,255,0.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    .bio-modal-title{
      font-size:20px;
      font-family:'textbold', sans-serif;
      color:var(--text);
    }
    .bio-modal-close{
      width:32px;
      height:32px;
      border-radius:50%;
      border:1px solid rgba(255,255,255,0.2);
      background:#181818;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:transform 0.2s;
    }
    .bio-modal-close:active{
      transform:scale(0.95);
    }
    .bio-modal-close img{
      width:16px;
      height:16px;
      filter:brightness(0) invert(1);
      pointer-events:none;
    }
    .bio-modal-body{
      padding:24px;
      overflow-y:auto;
      flex:1;
    }
    .bio-modal-body::-webkit-scrollbar{
      width:8px;
    }
    .bio-modal-body::-webkit-scrollbar-thumb{
      background:rgba(255,255,255,0.2);
      border-radius:999px;
    }
    .bio-modal-text{
      font-size:14px;
      line-height:1.7;
      color:var(--text);
      font-family:'text', sans-serif;
      white-space:pre-wrap;
    }

    .footer{
      text-align:center;
      padding:24px;
      color:rgba(200,200,200,0.4);
      font-size:12px;
      border-top:1px solid rgba(255,255,255,.08);
      margin-top:10px;
      font-family:'text', sans-serif;
    }

    @media(max-width:900px){
      .hero-inner{
        flex-direction:column;
        align-items:center;
        text-align:center;
      }
      .actor-personal-card{
        grid-template-columns:1fr;
      }
      .actor-about{
        max-width:none;
      }
      .actor-main{
        align-items:center;
      }
    }
    @media(max-width:600px){
      .hero{
        padding:24px 16px 40px;
      }
      .actor-avatar-wrap{
        width:180px;
        height:270px;
      }
      .actor-name{
        font-size:28px;
      }
      .details{
        padding:0 16px;
      }
      .works-grid{
        grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));
        gap:12px;
      }
      .bio-modal{
        max-height:90vh;
      }
      .bio-modal-header{
        padding:16px 20px;
      }
      .bio-modal-body{
        padding:20px;
      }
    }
  </style>
</head>
<body>
  <div class="preloader" id="preloader">
    <div class="loader-wrapper">
      <div class="packman"></div>
      <div class="dots">
        <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
      </div>
    </div>
  </div>

  <button class="close-btn" aria-label="Закрыть" title="Закрыть">
    <img src="../ico/закрыть.svg" alt="Закрыть">
  </button>

  <header class="hero" id="hero">
    <div class="hero-bg">
      <div class="hero-bg-blur" id="heroBlur"></div>
      <div class="hero-bg-overlay"></div>
    </div>

    <div class="hero-inner fade-in" id="heroInner">
      <div class="actor-avatar-wrap">
        <div class="actor-avatar-border"></div>
        <div class="actor-avatar">
          <img src="" alt="Актёр" id="actorAvatar">
        </div>
      </div>

      <div class="actor-main">
        <div class="actor-tag-id" id="actorIdTag"></div>
        <h1 class="actor-name" id="actorName"></h1>
        <div class="actor-bio-wrapper">
          <p class="actor-about" id="actorBio"></p>
          <a class="bio-read-more" id="bioReadMore" style="display:none;">Ещё</a>
        </div>

        <div class="actor-personal-card" id="personalCard">
          <div class="person-row-value" id="knownCredits"></div>
          <div class="person-row-value" id="gender"></div>
          <div class="person-row-value" id="birthday"></div>
          <div class="person-row-value" id="placeOfBirth"></div>
        </div>
      </div>
    </div>
  </header>

  <main class="details">
    <section class="card">
      <h2 class="section-title">Известность за</h2>
      <div class="works-grid" id="worksGrid"></div>
      <p class="empty-placeholder" id="worksEmpty" style="display:none;">Работы не найдены.</p>
      <button class="load-more-btn" id="loadMoreBtn">Показать ещё</button>
    </section>
  </main>

  <footer class="footer">
    Данные об актёре загружаются с TMDB. Этот сайт создан в ознакомительных и развлекательных целях.
  </footer>

  <div class="bio-modal-backdrop" id="bioModalBackdrop">
    <div class="bio-modal">
      <div class="bio-modal-header">
        <h3 class="bio-modal-title">Биография</h3>
        <button class="bio-modal-close" id="bioModalClose">
          <img src="../ico/закрыть.svg" alt="Закрыть">
        </button>
      </div>
      <div class="bio-modal-body">
        <p class="bio-modal-text" id="bioModalText"></p>
      </div>
    </div>
  </div>

  <script>
    const API_KEY = '06936145fe8e20be28b02e26b55d3ce6';
    const API = 'https://api.themoviedb.org/3';
    const IMG = (p, s='original') => p ? `https://image.tmdb.org/t/p/${s}${p}` : '';
    const WATCH_URL = 'watch.html';

    const $ = s => document.querySelector(s);

    const urlParams = new URLSearchParams(window.location.search);
    const PERSON_ID = urlParams.get('ID') || '1356210';

    let allWorks = [];
    let currentIndex = 0;
    const ITEMS_PER_LOAD = 10;
    const MIN_VOTES = 100;
    let fullBio = '';

    function hidePreloader(){
      const preloader = $('#preloader');
      preloader.classList.add('hidden');
      setTimeout(() => preloader.remove(), 500);
    }

    function showHero(){
      setTimeout(()=>{
        $('#heroInner').classList.add('visible');
      },100);
    }

    function mapGender(g){
      if(g === 1) return 'Женский';
      if(g === 2) return 'Мужской';
      if(g === 3) return 'Небинарный';
      return 'Не указано';
    }

    function formatBirthday(dateStr){
      if(!dateStr) return '—';
      const d = new Date(dateStr);
      if(isNaN(d.getTime())) return dateStr;
      return d.toLocaleDateString('ru-RU', {day:'numeric', month:'long', year:'numeric'});
    }

    function calcAge(dateStr){
      if(!dateStr) return '';
      const birth = new Date(dateStr);
      if(isNaN(birth.getTime())) return '';
      const now = new Date();
      let age = now.getFullYear() - birth.getFullYear();
      const m = now.getMonth() - birth.getMonth();
      if(m < 0 || (m === 0 && now.getDate() < birth.getDate())) age--;
      return age >= 0 ? ` (${age} лет)` : '';
    }

    function getRatingClass(rating){
      if(rating >= 7.0) return 'high';
      if(rating >= 5.0) return 'medium';
      return 'low';
    }

    function checkBioOverflow(){
      const bioEl = $('#actorBio');
      const readMoreBtn = $('#bioReadMore');
      
      if(!fullBio || fullBio === 'Биография отсутствует.'){
        readMoreBtn.style.display = 'none';
        return;
      }

      if(bioEl.scrollHeight > bioEl.clientHeight){
        readMoreBtn.style.display = 'inline';
      }else{
        readMoreBtn.style.display = 'none';
      }
    }

    function openBioModal(){
      $('#bioModalText').textContent = fullBio;
      $('#bioModalBackdrop').classList.add('active');
    }

    function closeBioModal(){
      $('#bioModalBackdrop').classList.remove('active');
    }

    $('#bioReadMore').addEventListener('click', openBioModal);
    $('#bioModalClose').addEventListener('click', closeBioModal);
    $('#bioModalBackdrop').addEventListener('click', (e)=>{
      if(e.target.id === 'bioModalBackdrop'){
        closeBioModal();
      }
    });

    function renderWorks(items){
      const worksGrid = $('#worksGrid');
      const worksEmpty = $('#worksEmpty');
      const loadMoreBtn = $('#loadMoreBtn');

      items.forEach(item=>{
        const card = document.createElement('div');
        card.className = 'work-card';
        card.dataset.id = item.id;
        card.dataset.media = item.media_type; // movie | tv

        const title = item.title || item.name || item.original_title || item.original_name || 'Без названия';
        const year = (item.release_date || item.first_air_date || '').slice(0,4);
        const rating = item.vote_average ? item.vote_average.toFixed(1) : '';
        const ratingClass = rating ? getRatingClass(parseFloat(rating)) : '';
        const ratingBadge = rating ? `<div class="work-rating-badge ${ratingClass}">${rating}</div>` : '';
        
        card.innerHTML = `
          <div class="work-thumb">
            ${item.poster_path ? `<img src="${IMG(item.poster_path,'w300')}" alt="${title}">` : ''}
            ${ratingBadge}
          </div>
          <div class="work-title">${title}</div>
          <div class="work-meta">${year}</div>
        `;
        worksGrid.appendChild(card);
      });

      if(currentIndex >= allWorks.length){
        loadMoreBtn.classList.add('hidden');
      }else{
        loadMoreBtn.classList.remove('hidden');
      }
    }

    function loadMoreWorks(){
      const nextBatch = allWorks.slice(currentIndex, currentIndex + ITEMS_PER_LOAD);
      currentIndex += ITEMS_PER_LOAD;
      renderWorks(nextBatch);
    }

    async function loadPerson(){
      try{
        const [personRes, creditsRes] = await Promise.all([
          fetch(`${API}/person/${PERSON_ID}?api_key=${API_KEY}&language=ru-RU`),
          fetch(`${API}/person/${PERSON_ID}/combined_credits?api_key=${API_KEY}&language=ru-RU`)
        ]);

        if(!personRes.ok || !creditsRes.ok){
          throw new Error('Ошибка загрузки данных актёра');
        }

        const person = await personRes.json();
        const credits = await creditsRes.json();

        const profilePath = person.profile_path || null;
        if(profilePath){
          $('#actorAvatar').src = IMG(profilePath,'w500');
          $('#heroBlur').style.backgroundImage = `url(${IMG(profilePath,'w780')})`;
        }

        $('#actorIdTag').textContent = `Actor/${PERSON_ID}`;
        $('#actorName').textContent = person.name || 'Неизвестный актёр';
        document.title = `${person.name || 'Актёр'} — TMDB`;

        fullBio = person.biography || 'Биография отсутствует.';
        $('#actorBio').textContent = fullBio;

        const totalCredits = credits.cast?.length || 0;
        $('#knownCredits').textContent = `Всего работ: ${totalCredits}`;
        $('#gender').textContent = `Пол: ${mapGender(person.gender)}`;
        const bdayText = formatBirthday(person.birthday);
        const ageText = calcAge(person.birthday);
        $('#birthday').textContent = `Дата рождения: ${bdayText}${ageText}`;
        $('#placeOfBirth').textContent = `Место рождения: ${person.place_of_birth || '—'}`;

        const cast = credits.cast || [];

        const sortedByRating = [...cast].sort((a,b)=> (b.vote_average||0) - (a.vote_average||0));
        const popular = sortedByRating.filter(i => (i.vote_count || 0) >= MIN_VOTES);
        const lowVotes = sortedByRating.filter(i => (i.vote_count || 0) < MIN_VOTES);
        allWorks = [...popular, ...lowVotes];

        if(allWorks.length === 0){
          worksEmpty.style.display='block';
          $('#loadMoreBtn').classList.add('hidden');
        }else{
          $('#worksEmpty').style.display='none';
          loadMoreWorks();
        }

        hidePreloader();
        showHero();
        setTimeout(checkBioOverflow, 100);

      }catch(e){
        console.error('Ошибка загрузки персоны', e);
        $('#actorName').textContent = 'Ошибка загрузки актёра';
        $('#actorBio').textContent = 'Не удалось загрузить данные актёра. Проверьте ID.';
        hidePreloader();
      }
    }

    $('#loadMoreBtn').addEventListener('click', loadMoreWorks);

    document.querySelector('.close-btn').addEventListener('click', () => {
      window.history.back();
    });

    document.addEventListener('contextmenu', e => e.preventDefault());

    // переход по клику на постер
    document.addEventListener('click', e=>{
      const card = e.target.closest('.work-card');
      if(!card) return;
      const id = card.dataset.id;
      const media = card.dataset.media;
      if(!id || !media) return;

      if(media === 'movie'){
        window.location.href = `${WATCH_URL}?M_ID=${id}`;
      }else if(media === 'tv'){
        window.location.href = `${WATCH_URL}?TV_ID=${id}`;
      }
    });

    loadPerson();
  </script>
</body>
</html>
